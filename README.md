# WB API Integration

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å WB API –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –≤ MySQL –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö.

**–ê–≤—Ç–æ—Ä:** Yan Bubenok
**Email:** yan@bubenok.com
**Telegram:** @iBubenok

## –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

–î–∞–Ω–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π Laravel-—Ä–µ—à–µ–Ω–∏–µ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –ø–æ–ª—É—á–µ–Ω–∏—è –∏ —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∏–∑ WB API. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–µ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö:

- **–ü—Ä–æ–¥–∞–∂–∏ (Sales)** - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–æ–≤–µ—Ä—à–µ–Ω–Ω—ã—Ö –ø—Ä–æ–¥–∞–∂–∞—Ö
- **–ó–∞–∫–∞–∑—ã (Orders)** - –¥–∞–Ω–Ω—ã–µ –æ –∑–∞–∫–∞–∑–∞—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤
- **–û—Å—Ç–∞—Ç–∫–∏ (Stocks)** - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –æ—Å—Ç–∞—Ç–∫–∞—Ö —Ç–æ–≤–∞—Ä–æ–≤ –Ω–∞ —Å–∫–ª–∞–¥–∞—Ö
- **–ü–æ—Å—Ç—É–ø–ª–µ–Ω–∏—è (Incomes)** - –¥–∞–Ω–Ω—ã–µ –æ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏–∏ —Ç–æ–≤–∞—Ä–æ–≤

### –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –ø—Ä–∏–Ω—Ü–∏–ø–∞–º SOLID
- –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω Repository Pattern –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–∞–Ω–Ω—ã–º–∏
- Service Layer –¥–ª—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏
- –ü–æ–ª–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- Docker-–æ–∫—Ä—É–∂–µ–Ω–∏–µ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ Redis
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ —Å–±–æ–µ–≤

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- PHP 8.2+
- Composer 2.x
- Docker & Docker Compose v2
- MySQL 8.0
- Redis

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```bash
git clone <repository-url>
cd wb-api-integration
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª —Å –ø—Ä–∏–º–µ—Ä–æ–º –æ–∫—Ä—É–∂–µ–Ω–∏—è:

```bash
cp .env.example .env
```

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `.env` —Ñ–∞–π–ª –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã. –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:

```env
# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
APP_NAME="WB API Integration"
APP_URL=http://localhost:8000

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
DB_CONNECTION=mysql
DB_HOST=mysql
DB_PORT=3306
DB_DATABASE=wb_integration
DB_USERNAME=wb_user
DB_PASSWORD=secure_password_123

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ Redis
CACHE_STORE=redis
REDIS_HOST=redis
REDIS_PORT=6379

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ WB API
WB_API_HOST=109.73.206.144:6969
WB_API_KEY=E6kUTYrYwZq2tN4QEtyzsbEBk3ie
WB_API_TIMEOUT=30
```

### 3. –ó–∞–ø—É—Å–∫ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤

```bash
docker compose up -d
```

–≠—Ç–æ –∑–∞–ø—É—Å—Ç–∏—Ç —Å–ª–µ–¥—É—é—â–∏–µ —Å–µ—Ä–≤–∏—Å—ã:
- **app** - PHP-FPM –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º
- **nginx** - –í–µ–±-—Å–µ—Ä–≤–µ—Ä
- **mysql** - –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö MySQL 8.0
- **redis** - –ö—ç—à-—Å–µ—Ä–≤–µ—Ä Redis

### 4. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
docker compose exec app composer install
```

### 5. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–ª—é—á–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```bash
docker compose exec app php artisan key:generate
```

### 6. –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π

```bash
docker compose exec app php artisan migrate
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∫–æ–Ω—Å–æ–ª—å–Ω—É—é –∫–æ–º–∞–Ω–¥—É `data:sync` –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö –∏–∑ API.

#### –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö

```bash
docker compose exec app php artisan data:sync
```

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è –¥–∞–Ω–Ω—ã–µ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 7 –¥–Ω–µ–π.

#### –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ç–∏–ø–∞ –¥–∞–Ω–Ω—ã—Ö

```bash
# –¢–æ–ª—å–∫–æ –ø—Ä–æ–¥–∞–∂–∏
docker compose exec app php artisan data:sync sales

# –¢–æ–ª—å–∫–æ –∑–∞–∫–∞–∑—ã
docker compose exec app php artisan data:sync orders

# –¢–æ–ª—å–∫–æ –æ—Å—Ç–∞—Ç–∫–∏
docker compose exec app php artisan data:sync stocks

# –¢–æ–ª—å–∫–æ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏—è
docker compose exec app php artisan data:sync incomes
```

#### –£–∫–∞–∑–∞–Ω–∏–µ –ø–µ—Ä–∏–æ–¥–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

```bash
# –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∑–∞ —É–∫–∞–∑–∞–Ω–Ω—ã–π –ø–µ—Ä–∏–æ–¥
docker compose exec app php artisan data:sync all --from=2024-01-01 --to=2024-01-31

# –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 30 –¥–Ω–µ–π
docker compose exec app php artisan data:sync all --days=30
```

### –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

```bash
# –ü–æ–ª—É—á–∏—Ç—å –ø—Ä–æ–¥–∞–∂–∏ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 14 –¥–Ω–µ–π
docker compose exec app php artisan data:sync sales --days=14

# –ü–æ–ª—É—á–∏—Ç—å –∑–∞–∫–∞–∑—ã –∑–∞ —è–Ω–≤–∞—Ä—å 2024
docker compose exec app php artisan data:sync orders --from=2024-01-01 --to=2024-01-31

# –ü–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—É—â–∏–µ –æ—Å—Ç–∞—Ç–∫–∏
docker compose exec app php artisan data:sync stocks

# –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π –º–µ—Å—è—Ü
docker compose exec app php artisan data:sync all --days=30
```

## –î–æ—Å—Ç—É–ø—ã –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

### Production –æ–∫—Ä—É–∂–µ–Ω–∏–µ (–£–¥–∞–ª–µ–Ω–Ω–∞—è –ë–î)

**–•–æ—Å—Ç–∏–Ω–≥:** Aiven MySQL 8.0 (30 –¥–Ω–µ–π –±–µ—Å–ø–ª–∞—Ç–Ω–æ)

‚úÖ **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç–∞ –∏ –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–±–æ—Ç–µ!**

**–î–æ—Å—Ç—É–ø—ã –∫ production –ë–î:**

- **Host:** wb-api-integration-bubenok-536b.c.aivencloud.com
- **Port:** 19555
- **Database:** wb_integration
- **Username:** avnadmin
- **Password:** [–ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –ø–æ –∑–∞–ø—Ä–æ—Å—É: yan@bubenok.com]
- **SSL:** –í–∫–ª—é—á–µ–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

**–°–æ—Å—Ç–æ—è–Ω–∏–µ:**
- ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å–æ–∑–¥–∞–Ω–∞
- ‚úÖ –í—Å–µ 14 —Ç–∞–±–ª–∏—Ü —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω—ã
- ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã
- ‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ
- ‚úÖ –¢–µ—Å—Ç–æ–≤–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∞
- ‚úÖ –ü–æ–ª–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∑–∞ 7 –¥–Ω–µ–π –≤—ã–ø–æ–ª–Ω–µ–Ω–∞

**–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏:**

1. **–¢–µ—Å—Ç–æ–≤–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è** (1 –¥–µ–Ω—å - 2025-11-14):
   - –ü–µ—Ä–∏–æ–¥: 1 –¥–µ–Ω—å
   - –û–±—Ä–∞–±–æ—Ç–∞–Ω–æ: 457 –∑–∞–ø–∏—Å–µ–π –æ –ø—Ä–æ–¥–∞–∂–∞—Ö
   - –°–æ–∑–¥–∞–Ω–æ: 457 –∑–∞–ø–∏—Å–µ–π
   - –û—à–∏–±–æ–∫: 0
   - –í—Ä–µ–º—è: 20 –º–∏–Ω—É—Ç
   - –°—Ç–∞—Ç—É—Å: ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ

2. **–ü–æ–ª–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è** (7 –¥–Ω–µ–π - 2025-11-08 –ø–æ 2025-11-15):
   - –ü–µ—Ä–∏–æ–¥: 7 –¥–Ω–µ–π
   - –û–±—Ä–∞–±–æ—Ç–∞–Ω–æ: 1096+ –∑–∞–ø–∏—Å–µ–π –æ –ø—Ä–æ–¥–∞–∂–∞—Ö
   - –°–æ–∑–¥–∞–Ω–æ: 1096+ –∑–∞–ø–∏—Å–µ–π
   - –û—à–∏–±–æ–∫: 0
   - –í—Ä–µ–º—è: ~47+ –º–∏–Ω—É—Ç
   - –°—Ç–∞—Ç—É—Å: üîÑ –í –ø—Ä–æ—Ü–µ—Å—Å–µ (–ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è –≤ —Ñ–æ–Ω–µ)

**–¢–µ–∫—É—â–∏–µ –¥–∞–Ω–Ω—ã–µ –≤ –ë–î:**
- **Sales (–ü—Ä–æ–¥–∞–∂–∏)**: 1553+ –∑–∞–ø–∏—Å–µ–π
- **Orders (–ó–∞–∫–∞–∑—ã)**: –û–∂–∏–¥–∞—é—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- **Stocks (–û—Å—Ç–∞—Ç–∫–∏)**: –û–∂–∏–¥–∞—é—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- **Incomes (–ü–æ—Å—Ç—É–ø–ª–µ–Ω–∏—è)**: –û–∂–∏–¥–∞—é—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

> **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è –º–µ–¥–ª–µ–Ω–Ω–æ –∏–∑-–∑–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π —Å–∫–æ—Ä–æ—Å—Ç–∏ WB API.
> –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ sales, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—á–Ω–µ—Ç—Å—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è orders, stocks –∏ incomes.

**–°–ø–∏—Å–æ–∫ —Ç–∞–±–ª–∏—Ü –≤ –ë–î:**
- `sales` - –ø—Ä–æ–¥–∞–∂–∏ (19 –ø–æ–ª–µ–π)
- `orders` - –∑–∞–∫–∞–∑—ã (20 –ø–æ–ª–µ–π)
- `stocks` - –æ—Å—Ç–∞—Ç–∫–∏ –Ω–∞ —Å–∫–ª–∞–¥–∞—Ö (16 –ø–æ–ª–µ–π)
- `incomes` - –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–æ–≤ (16 –ø–æ–ª–µ–π)
- `sync_logs` - –ª–æ–≥–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ (13 –ø–æ–ª–µ–π)
- `users` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–∏—Å—Ç–µ–º—ã (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ Laravel)
- `cache` - –∫—ç—à (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ Laravel)
- `cache_locks` - –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –∫—ç—à–∞ (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ Laravel)
- `jobs` - –æ—á–µ—Ä–µ–¥—å –∑–∞–¥–∞—á (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ Laravel)
- `job_batches` - –ø–∞–∫–µ—Ç—ã –∑–∞–¥–∞—á (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ Laravel)
- `failed_jobs` - –Ω–µ—É–¥–∞—á–Ω—ã–µ –∑–∞–¥–∞—á–∏ (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ Laravel)
- `migrations` - –∏—Å—Ç–æ—Ä–∏—è –º–∏–≥—Ä–∞—Ü–∏–π (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ Laravel)

### –õ–æ–∫–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ (Docker)

- **Host:** localhost (–∏–ª–∏ 127.0.0.1)
- **Port:** 3306
- **Database:** wb_integration
- **Username:** wb_user
- **Password:** secure_password_123
- **Root Password:** root_password_123

### –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —á–µ—Ä–µ–∑ MySQL –∫–ª–∏–µ–Ω—Ç

```bash
# Production –ë–î
mysql -h [production-host] -P 3306 -u [username] -p
# –ü–∞—Ä–æ–ª—å –±—É–¥–µ—Ç –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω –æ—Ç–¥–µ–ª—å–Ω–æ

# –õ–æ–∫–∞–ª—å–Ω–∞—è –ë–î
mysql -h 127.0.0.1 -P 3306 -u wb_user -p
# –ü–∞—Ä–æ–ª—å: secure_password_123
```

### –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —á–µ—Ä–µ–∑ Docker (–ª–æ–∫–∞–ª—å–Ω–æ)

```bash
docker compose exec mysql mysql -u wb_user -p wb_integration
# –ü–∞—Ä–æ–ª—å: secure_password_123
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü

### sales (–ü—Ä–æ–¥–∞–∂–∏)

–•—Ä–∞–Ω–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å–æ–≤–µ—Ä—à–µ–Ω–Ω—ã—Ö –ø—Ä–æ–¥–∞–∂–∞—Ö.

| –ö–æ–ª–æ–Ω–∫–∞ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|-----|----------|
| id | BIGINT | –ü–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á |
| external_id | VARCHAR | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –∏–∑ API |
| sale_date | DATE | –î–∞—Ç–∞ –ø—Ä–æ–¥–∞–∂–∏ |
| order_number | VARCHAR | –ù–æ–º–µ—Ä –∑–∞–∫–∞–∑–∞ |
| article | VARCHAR | –ê—Ä—Ç–∏–∫—É–ª —Ç–æ–≤–∞—Ä–∞ |
| price | DECIMAL | –¶–µ–Ω–∞ |
| discount | DECIMAL | –°–∫–∏–¥–∫–∞ |
| final_price | DECIMAL | –ò—Ç–æ–≥–æ–≤–∞—è —Ü–µ–Ω–∞ |
| quantity | INT | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ |
| warehouse | VARCHAR | –°–∫–ª–∞–¥ |
| region | VARCHAR | –†–µ–≥–∏–æ–Ω |

### orders (–ó–∞–∫–∞–∑—ã)

–°–æ–¥–µ—Ä–∂–∏—Ç –¥–∞–Ω–Ω—ã–µ –æ –∑–∞–∫–∞–∑–∞—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤.

| –ö–æ–ª–æ–Ω–∫–∞ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|-----|----------|
| id | BIGINT | –ü–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á |
| external_id | VARCHAR | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –∏–∑ API |
| order_date | DATE | –î–∞—Ç–∞ –∑–∞–∫–∞–∑–∞ |
| order_number | VARCHAR | –ù–æ–º–µ—Ä –∑–∞–∫–∞–∑–∞ |
| article | VARCHAR | –ê—Ä—Ç–∏–∫—É–ª —Ç–æ–≤–∞—Ä–∞ |
| price | DECIMAL | –¶–µ–Ω–∞ |
| status | VARCHAR | –°—Ç–∞—Ç—É—Å –∑–∞–∫–∞–∑–∞ |
| warehouse | VARCHAR | –°–∫–ª–∞–¥ |

### stocks (–û—Å—Ç–∞—Ç–∫–∏)

–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –æ—Å—Ç–∞—Ç–∫–∞—Ö —Ç–æ–≤–∞—Ä–æ–≤ –Ω–∞ —Å–∫–ª–∞–¥–∞—Ö.

| –ö–æ–ª–æ–Ω–∫–∞ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|-----|----------|
| id | BIGINT | –ü–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á |
| external_id | VARCHAR | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –∏–∑ API |
| stock_date | DATE | –î–∞—Ç–∞ –¥–∞–Ω–Ω—ã—Ö –æ–± –æ—Å—Ç–∞—Ç–∫–∞—Ö |
| article | VARCHAR | –ê—Ä—Ç–∏–∫—É–ª —Ç–æ–≤–∞—Ä–∞ |
| warehouse | VARCHAR | –°–∫–ª–∞–¥ |
| quantity | INT | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞ —Å–∫–ª–∞–¥–µ |
| category | VARCHAR | –ö–∞—Ç–µ–≥–æ—Ä–∏—è |
| brand | VARCHAR | –ë—Ä–µ–Ω–¥ |

### incomes (–ü–æ—Å—Ç—É–ø–ª–µ–Ω–∏—è)

–î–∞–Ω–Ω—ã–µ –æ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏–∏ —Ç–æ–≤–∞—Ä–æ–≤.

| –ö–æ–ª–æ–Ω–∫–∞ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|-----|----------|
| id | BIGINT | –ü–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á |
| external_id | VARCHAR | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –∏–∑ API |
| income_date | DATE | –î–∞—Ç–∞ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏—è |
| article | VARCHAR | –ê—Ä—Ç–∏–∫—É–ª —Ç–æ–≤–∞—Ä–∞ |
| quantity | INT | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ |
| price | DECIMAL | –¶–µ–Ω–∞ |
| warehouse | VARCHAR | –°–∫–ª–∞–¥ |
| supply_number | VARCHAR | –ù–æ–º–µ—Ä –ø–æ—Å—Ç–∞–≤–∫–∏ |

### sync_logs (–õ–æ–≥–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏)

–õ–æ–≥–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö.

| –ö–æ–ª–æ–Ω–∫–∞ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|-----|----------|
| id | BIGINT | –ü–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á |
| entity_type | VARCHAR | –¢–∏–ø —Å—É—â–Ω–æ—Å—Ç–∏ |
| started_at | DATETIME | –í—Ä–µ–º—è –Ω–∞—á–∞–ª–∞ |
| finished_at | DATETIME | –í—Ä–µ–º—è –æ–∫–æ–Ω—á–∞–Ω–∏—è |
| status | VARCHAR | –°—Ç–∞—Ç—É—Å (running/completed/failed) |
| records_processed | INT | –û–±—Ä–∞–±–æ—Ç–∞–Ω–æ –∑–∞–ø–∏—Å–µ–π |
| records_created | INT | –°–æ–∑–¥–∞–Ω–æ –∑–∞–ø–∏—Å–µ–π |
| records_updated | INT | –û–±–Ω–æ–≤–ª–µ–Ω–æ –∑–∞–ø–∏—Å–µ–π |
| records_failed | INT | –û—à–∏–±–æ–∫ |

## API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç—Å—è —Å–æ —Å–ª–µ–¥—É—é—â–∏–º–∏ —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞–º–∏ WB API:

- `GET /api/sales` - –ü–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–æ–¥–∞–∂ –∑–∞ –ø–µ—Ä–∏–æ–¥
- `GET /api/orders` - –ü–æ–ª—É—á–µ–Ω–∏–µ –∑–∞–∫–∞–∑–æ–≤ –∑–∞ –ø–µ—Ä–∏–æ–¥
- `GET /api/stocks` - –ü–æ–ª—É—á–µ–Ω–∏–µ –æ—Å—Ç–∞—Ç–∫–æ–≤ –Ω–∞ —Ç–µ–∫—É—â–∏–π –¥–µ–Ω—å
- `GET /api/incomes` - –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏–π –∑–∞ –ø–µ—Ä–∏–æ–¥

–í—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç –ø–∞–≥–∏–Ω–∞—Ü–∏—é (–ø–∞—Ä–∞–º–µ—Ç—Ä—ã `page` –∏ `limit`).

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤

```bash
docker compose exec app php artisan test
```

### –ó–∞–ø—É—Å–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –≥—Ä—É–ø–ø—ã —Ç–µ—Å—Ç–æ–≤

```bash
# Unit —Ç–µ—Å—Ç—ã
docker compose exec app php artisan test --testsuite=Unit

# Feature —Ç–µ—Å—Ç—ã
docker compose exec app php artisan test --testsuite=Feature
```

### –ó–∞–ø—É—Å–∫ —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º –∫–æ–¥–∞

```bash
docker compose exec app php artisan test --coverage
```

## –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ —Ñ–∞–π–ª—ã:

- **–û—Å–Ω–æ–≤–Ω–æ–π –ª–æ–≥:** `storage/logs/laravel.log`
- **–õ–æ–≥–∏ API:** –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –∫ WB API –ª–æ–≥–∏—Ä—É—é—Ç—Å—è —Å –¥–µ—Ç–∞–ª—è–º–∏
- **–õ–æ–≥–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏:** –°–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü—É `sync_logs`

–ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏:

```bash
docker compose exec app tail -f storage/logs/laravel.log
```

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã—Ö —Ä–µ—à–µ–Ω–∏–π –∏ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å–º. –≤ —Ñ–∞–π–ª–µ [ARCHITECTURE.md](ARCHITECTURE.md).

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ü—Ä–æ–±–ª–µ–º—ã —Å –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞

```bash
docker compose exec app chmod -R 775 storage bootstrap/cache
docker compose exec app chown -R www-data:www-data storage bootstrap/cache
```

### –û—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞

```bash
docker compose exec app php artisan cache:clear
docker compose exec app php artisan config:clear
docker compose exec app php artisan route:clear
```

### –ü–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤

```bash
docker compose down
docker compose up -d --build
```

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∏ –∫–æ–Ω—Ç–∞–∫—Ç—ã

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –≤–æ–ø—Ä–æ—Å–æ–≤ –∏–ª–∏ –ø—Ä–æ–±–ª–µ–º:

- **Email:** yan@bubenok.com
- **Telegram:** @iBubenok

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License
